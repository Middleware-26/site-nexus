<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Configuração de Perfil</title>
  <style>
    #sidebar-header {
      transition: height 0.2s ease, background-color 0.3s ease;
    }
    #sidebar {
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
  </style>
</head>
<body class="relative bg-neutral-100 text-gray-800 dark:bg-neutral-900 dark:text-gray-100 transition-colors">

  <!-- Cabeçalho principal -->
  <header id="main-header" class="bg-slate-900 p-6 flex items-center">
    <button class="flex flex-col gap-1.5 w-6 text-white" onclick="abrirMenu()">
      <span class="h-0.5 w-full bg-white"></span>
      <span class="h-0.5 w-full bg-white"></span>
      <span class="h-0.5 w-full bg-white"></span>
    </button>
    <h1 class="text-white ml-4 text-lg font-semibold">Configuração</h1>
  </header>

  <!-- Sidebar -->
  <div id="sidebar"
       class="fixed left-0 top-0 h-full w-64 bg-neutral-700 transform -translate-x-full opacity-0 z-50">
    <div id="sidebar-header" class="bg-slate-600 p-6 rounded-b-lg">
      <div class="flex justify-end">
        <button onclick="abrirMenu()"
                class="text-white text-lg hover:bg-slate-500 px-2 rounded">✕</button>
      </div>
    </div>

    <div class="p-6 flex flex-col items-center text-white">
      <img id="avatarPreview"
           src="avatar/padrao.jpg"
           alt="Foto de perfil"
           class="w-32 h-32 rounded-full border-4 border-gray-300 object-cover mb-4"/>

      <div class="flex flex-col items-center mb-6">
        <h2 id="userName" class="text-lg font-semibold text-center">
          Usuário Padrão
        </h2>
        <h1 class="text-center text-sm text-gray-300">Colégio: xxxx
        </h1>
      </div>

      <!-- Switch Claro/Escuro -->
      <div class="w-full flex items-center gap-2 mt-6">
        <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" id="themeToggle" class="sr-only peer">
          <div class="w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-slate-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
        </label>
        <span class="text-sm">Claro/Escuro</span>
      </div>

      <nav class="w-full space-y-2 mt-6">
        <a href="index.html"
           class="block py-3 px-4 rounded-lg bg-gray-800 text-white
                  text-center font-semibold shadow-md hover:bg-gray-700
                  transform hover:scale-105 transition-all duration-300">
          Dashboard
        </a>
        <a href="configuracao.html"
           class="block py-3 px-4 rounded bg-gray-700 text-white text-center">
          Configuração
        </a>
        <a href="#" class="block py-3 px-4 rounded hover:bg-neutral-600 text-white text-center">
          Sobre
        </a>
        <a href="#" class="block py-3 px-4 rounded hover:bg-neutral-600 text-white text-center">
          Contato
        </a>
      </nav>
    </div>
  </div>

  <!-- Conteúdo Principal -->
  <main class="ml-0 lg:ml-64 transition-all duration-300 p-6">
    <div class="bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6 mx-auto">
      <h1 class="text-2xl font-semibold mb-4 text-center text-gray-100">Configurar Perfil</h1>

      <form id="configForm" class="space-y-4">
        <div class="flex flex-col items-center">
          <img id="avatarPreviewConfig"
               src="avatar/padrao.jpg"
               alt="Preview Avatar"
               class="w-32 h-32 rounded-full border-4 border-gray-600 object-cover mb-2"/>
          <input id="avatarInputConfig"
                 type="file"
                 accept="image/*"
                 class="text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-gray-700 file:text-gray-300 hover:file:bg-gray-600"/>
        </div>

        <div>
          <label for="nomeInput" class="block mb-1 font-medium text-gray-200">Insira seu nome completo:</label>
          <input id="nomeInput"
                 type="text"
                 class="w-full border px-3 py-2 rounded bg-gray-700 text-gray-300 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500"
                 placeholder="Digite seu nome completo"/>
        </div>

        <button type="submit"
                class="w-full bg-blue-700 text-white py-2 rounded hover:bg-blue-600 transition-all">
          Salvar e Voltar
        </button>
      </form>
    </div>
  </main>

  <script>
const sidebar = document.getElementById('sidebar');
const themeToggle = document.getElementById('themeToggle');

function abrirMenu() {
  sidebar.classList.toggle('-translate-x-full');
  sidebar.classList.toggle('opacity-0');
  sidebar.classList.toggle('translate-x-0');
  sidebar.classList.toggle('opacity-100');
}

function toggleTheme() {
  const isDark = document.documentElement.classList.toggle('dark');
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
}

function loadTheme() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  if (savedTheme === 'dark') {
    document.documentElement.classList.add('dark');
    themeToggle.checked = true;
  }
}

window.addEventListener('load', () => {
  loadTheme();

  // Carregar nome e avatar do localStorage no formulário
  const savedName = localStorage.getItem('nomeUsuario');
  const savedAvatar = localStorage.getItem('avatarUsuario');

  if (savedName) {
    document.getElementById('nomeInput').value = savedName;
    document.getElementById('userName').textContent = savedName;
  }
  if (savedAvatar) {
    document.getElementById('avatarPreviewConfig').src = savedAvatar;
    document.getElementById('avatarPreview').src = savedAvatar;
  }
});

// Trocar o preview da imagem ao escolher arquivo
document.getElementById('avatarInputConfig').addEventListener('change', (event) => {
  const file = event.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = () => {
    document.getElementById('avatarPreviewConfig').src = reader.result;
  };
  reader.readAsDataURL(file);
});

// Salvar dados no localStorage ao enviar formulário
document.getElementById('configForm').addEventListener('submit', (e) => {
  e.preventDefault();

  const nome = document.getElementById('nomeInput').value.trim();
  const avatarSrc = document.getElementById('avatarPreviewConfig').src;

  if (nome) {
    localStorage.setItem('nomeUsuario', nome);
  }
  if (avatarSrc) {
    localStorage.setItem('avatarUsuario', avatarSrc);
  }

  // Redireciona para a página principal depois de salvar
  window.location.href = 'index.html';
});

themeToggle.addEventListener('change', toggleTheme);

  </script>
</body>
</html>